"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[225],{6225:(s,t,e)=>{e.r(t),e.d(t,{default:()=>A});var r=e(2791);const a="ProfileInfo_descriptionBlock__ys87p";var o=e(1442),i=e(184);r.Component;const u=s=>{let[t,e]=(0,r.useState)(!1),[a,o]=(0,r.useState)(s.status);(0,r.useEffect)((()=>{o(s.status)}),[s.status]);return(0,i.jsxs)("div",{children:[!t&&(0,i.jsx)("div",{children:(0,i.jsx)("span",{onDoubleClick:()=>{e(!0)},children:s.status||"----"})}),t&&(0,i.jsx)("div",{children:(0,i.jsx)("input",{onChange:s=>{o(s.currentTarget.value)},autoFocus:!0,onBlur:()=>{e(!1),s.updateStatus(a)},value:a})})]})},n=s=>{let{profile:t,status:e,updateStatus:r}=s;return t?(0,i.jsx)("div",{children:(0,i.jsxs)("div",{className:a,children:[(0,i.jsx)("img",{src:t.photos.large}),(0,i.jsx)(u,{status:e,updateStatus:r})]})}):(0,i.jsx)(o.Z,{})};var l=e(6868);const p="MyPosts_postsBlock__4vVq0",d="MyPosts_posts__ybFCy",c="Post_item__WRyZV",h=s=>(0,i.jsxs)("div",{className:c,children:[(0,i.jsx)("img",{src:"https://www.sunhome.ru/i/wallpapers/180/prekrasnaya-neitiri-avatar.orig.jpg"}),s.message," ",s.likesCounts,(0,i.jsx)("div",{children:(0,i.jsx)("span",{children:"like"})})]});var x=e(6139),j=e(704),m=e(5304),f=e(4394);const v=r.memo((s=>{let t=[...s.posts].reverse().map((s=>(0,i.jsx)(h,{message:s.message,likesCounts:s.likesCount})));return(0,i.jsxs)("div",{className:p,children:[(0,i.jsx)("h3",{children:"My posts"}),(0,i.jsx)(P,{onSubmit:t=>{s.addPost(t.newPostText)}}),(0,i.jsx)("div",{className:d,children:t})]})})),g=(0,m.D)(10),P=(0,j.Z)({form:"ProfileAddNewPostForm"})((s=>(0,i.jsxs)("form",{onSubmit:s.handleSubmit,children:[(0,i.jsx)("div",{children:(0,i.jsx)(x.Z,{component:f.gx,name:"newPostText",placeholder:"Post message",validate:[m.C,g]})}),(0,i.jsx)("div",{children:(0,i.jsx)("button",{children:"Add post"})})]}))),S=v;var _=e(8687);const k=(0,_.$j)((s=>({posts:s.profilePage.posts,newPostText:s.profilePage.newPostText})),(s=>({addPost:t=>{s((0,l.Wl)(t))}})))(S),C=s=>(0,i.jsxs)("div",{children:[(0,i.jsx)(n,{profile:s.profile,status:s.status,updateStatus:s.updateStatus}),(0,i.jsx)(k,{})]});var w=e(7689),y=e(1154);class b extends r.Component{componentDidMount(){let s=this.props.router.params.userId;s||(s=this.props.authorizedUserId),this.props.getUserProfile(s),this.props.getStatus(s)}render(){return(0,i.jsx)(C,{...this.props,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus})}}const A=(0,y.qC)((0,_.$j)((s=>({profile:s.profilePage.profile,status:s.profilePage.status,authorizedUserId:s.auth.userId,isAuth:s.auth.isAuth})),{getUserProfile:l.et,getStatus:l.lR,updateStatus:l.Nf}),(function(s){return function(t){let e=(0,w.TH)(),a=(0,w.s0)(),o=(0,w.UO)();return(0,r.useEffect)((()=>{if(!t.isAuth)try{a("/login")}catch(s){console.log("err")}}),[t.isAuth,a]),(0,i.jsx)(s,{...t,router:{location:e,navigate:a,params:o}})}}))(b)}}]);
//# sourceMappingURL=225.5cdaa370.chunk.js.map